<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>JSMaps - Responsive Javascript Maps</title>
  <meta name="description" content="JSMaps - Responsive Javascript Maps - http://jsmaps.io">
  <meta name="author" content="LGLab">
  <link href="jsmaps/bootstrap.css" rel="stylesheet" type="text/css" />
  <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">-->
  <!-- Demo scripts -->
  <link href='https://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" rel="stylesheet" type="text/css" />
  <!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">	
  <style type="text/css">
    html {
      box-sizing: border-box;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }

    body {
      font-family: 'Droid Sans', sans-serif;
      background:#f2f2f2;
      font-size:14px;
      line-height:21px;
    }

    .container {
      width: 960px;
      margin:20px auto;
    }

    @media only screen and (min-width: 768px) and (max-width: 1000px) {
      .container {
        width: 768px;
      }
    }
    @media only screen and (max-width: 767px) {
      .container {
        width: 420px;
      }
    }
    @media only screen and (max-width: 480px) {
      .container {
        width: 300px;
      }
    }

    a img {
      border:none;
    }

    h1, h2, h3, h4, h5, h6{ 
      font-weight:normal; 
    }
    h1{ 
      font-size:26px; 
      line-height:32px; 
    }
    p, ul{
      margin-bottom:10px;
    }

  </style>
  <!-- End Demo scripts -->

  <!-- Jquery is required, embed on your page if not already - don't embed 2 versions -->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" type="text/javascript"></script>
  <!-- End Jquery -->
  
 
  <!-- Map scripts - add the below to your page -->
  <!-- jsmaps-panzoom.js is optional if you are using enablePanZoom -->
  <script src="jsonLoad.js"></script>
  
  <link href="jsmaps/jsmaps.css" rel="stylesheet" type="text/css" />
  
  
	<!-- BootStrap scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
	<!-- End BootStrap scripts -->
</head>

<body>
	
	<div id="title"><center><span class="headTitle">Explore the football league of the world champions </span> <div class="mytooltip"><span id="infoImage"></span><br />
	<span  class="tooltipText"><h2>Understand the <b>dots</b>.</h2><p>The <strong>locations</strong> of the dot show where the game was played.The <strong>size</strong> of the dot represents the attendance.	<strong>Click on it</strong> to get more data about the game</p>
	</center></span>
		<center><p>Did you know that the French league has only one team per city in the league 1? <br />That makes it the most decentralised league in Europe, posibly in the world as well.</p></center>
	</div>
	</div>
	<div id="background"></div>
	<canvas id="fireworksCanvas" class="fireworks"></canvas>
	
	<div class=".container-fluid">
	<div class="row" style="height:50px">
		<div class="col-sm-2"></div>
		<div class="col-sm-2">
			<div>
				<select id="selectLeague">
					<option value="League 1-2017">League 1-2017</option>
					<option value="League 1-2016">League 1-2016</option>
				</select>
			</div>
		</div>
		<div class="col-sm-4 row" id="leagueSelection">
			<div class="col-sm-2 col-lg-2">
				<span id="buttonLeft"></span>
			</div>
			<label id="leagueLabel" class="col-sm-8"></label>
			<div class="col-sm-2 col-lg-2">
				<span id="buttonRight"></span>
			</div>
			
		</div>
		<div class="col-sm-4 col-lg-4">
		</div>
	</div>
	<div class="row">
		<!-- row -->
		<div class="col-sm-2"></div>
		<div class="col-sm-2" id="scoreboard"></div>
		<!-- Map html - add the below to your page -->
		<div class="col-sm-6">
			<div class="jsmaps-wrapper" id="france-map"></div>
		</div>
		<div class="col-sm-2 row" style="opacity: 0.7;">
			<div class="col-sm-12 row" style="height: 100px;">
				<div class="col-sm-6" style="height: 100px;">
				<svg height="100" width="100">
				  <circle cx="50" cy="40" r="26.5" stroke="#24221f" fill="#ffc90e" />
				</svg> 
				 </div>
				 <div class="col-sm-6" style="height: 100px;">
					<center style="margin-top: 30px;"> 50 000</center>
				 </div>
			</div>
			<div class="col-sm-12 row" style="height: 100px;">
				<div class="col-sm-6" style="height: 100px;">
				<svg height="100" width="100">
				  <circle cx="50" cy="40" r="21.2" stroke="#24221f" fill="#ffc90e" />
				</svg> 
				 </div>
				 <div class="col-sm-6" style="height: 100px;">
					<center style="margin-top: 30px;"> 40 000</center>
				 </div>
			</div>
			<div class="col-sm-12 row" style="height: 100px;">
				<div class="col-sm-6" style="height: 100px;">
				<svg height="100" width="100">
				  <circle cx="50" cy="40" r="15.9" stroke="#24221f" fill="#ffc90e" />
				</svg> 
				 </div>
				 <div class="col-sm-6" style="height: 100px;">
					<center style="margin-top: 30px;"> 30 000</center>
				 </div>
			</div>
			<div class="col-sm-12 row" style="height: 100px;">
				<div class="col-sm-6" style="height: 100px;">
				<svg height="100" width="100">
				  <circle cx="50" cy="40" r="10.6" stroke="#24221f" fill="#ffc90e" />
				</svg> 
				 </div>
				 <div class="col-sm-6" style="height: 100px;">
					<center style="margin-top: 30px;"> 20 000</center>
				 </div>
			</div>
			<div class="col-sm-12 row" style="height: 100px;">
				<div class="col-sm-6" style="height: 100px;">
				<svg height="100" width="100">
				  <circle cx="50" cy="40" r="5.3" stroke="#24221f" fill="#ffc90e" />
				</svg> 
				 </div>
				 <div class="col-sm-6" style="height: 100px;">
					<center style="margin-top: 30px;"> 10 000</center>
				 </div>
			</div>
			
		 </div>
		 <!-- end row -->
		 <!-- row -->
		 <div class="col-sm-2"></div>
		 <div class="col-sm-8">
			<center><p>People just love the last game of the chanpionship! <br />It is averagelly the most visited throuth the years.</p></center>
		 </div>
		 <div class="col-sm-2"></div>
		 <!-- end row -->
		 
		<!-- End Map html -->
		<!-- row -->
		<div class="col-sm-2"></div>
		<div class="col-sm-8" id="chartContainer" style="height: 300px;">
		</div>
		<div class="col-sm-2"></div>
		<!-- end row -->
	</div>
	  
  </div>
  

	<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
  <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>-->
  <script type="text/javascript">

    $(function() {
      
      $('#france-map').JSMaps({
        map: 'france',
		pinSize: 20
      });

    });
    
  </script>
  
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.js"></script>
<script src="fireworks.js"></script>
<!-- Map scripts -->
<script src="jsmaps/jsmaps-libs.js" type="text/javascript"></script>
<script src="jsmaps/jsmaps-panzoom.js"></script>
<script src="jsmaps/jsmaps.js" type="text/javascript"></script>
<script src="maps/france.js" type="text/javascript"></script>

<!-- End Map scripts -->
<!--P5 
<script src="../p5.js"></script>
<script src="../france/addons/p5.dom.min.js"></script>
<script src="../france/addons/p5.sound.min.js"></script>
<!--end P5 -->-->
<script>//chart code start here//
		function onClick(e) {
		setSelectedGame(e.dataPoint.x);
		//alert(  e.dataSeries.type + ", dataPoint { x:" + e.dataPoint.x + ", y: "+ e.dataPoint.y + " }" );
	}
		function drawChart(){
			var leagueString = $( "#selectLeague option:selected" ).text();
			var gameAttendanceData = [];
			var minimumAttendance = 50000;
			var minimumAttendanceIndex = 0;
			var maximumAttendance = 0;
			var maximumAttendanceIndex = 0
			for(i = 0; i< selectedLeague.length; i++){
				var gameList = selectedLeague[i]["gameList"];
				var averageAttendance = 0;
				
				for(j = 0; j< gameList.length; j++){
					averageAttendance += gameList[j]["pub"];
				}
				averageAttendance = averageAttendance/gameList.length
				if(averageAttendance < minimumAttendance){
					minimumAttendance = averageAttendance;
					minimumAttendanceIndex = i;
				}
				if(averageAttendance > maximumAttendance){
					maximumAttendance = averageAttendance;
					maximumAttendanceIndex = i;
				}
				if(i == gameSelected){
					gameAttendanceData[i] = {label: i+1, y: averageAttendance, indexLabel: "you are here", markerColor: "yellow"};
				}else{
					gameAttendanceData[i] = {label: i+1, y: averageAttendance};
				}
				
			}
			if(gameAttendanceData[minimumAttendanceIndex].indexLabel == "you are here"){
				gameAttendanceData[minimumAttendanceIndex] = {label: minimumAttendanceIndex+1, y: minimumAttendance, indexLabel: "lowest - you are here", markerColor: "DarkSlateGrey", markerType: "cross"};
			}else{
				gameAttendanceData[minimumAttendanceIndex] = {label: minimumAttendanceIndex+1, y: minimumAttendance, indexLabel: "lowest", markerColor: "DarkSlateGrey", markerType: "cross"};
			}
			
			if(gameAttendanceData[maximumAttendanceIndex].indexLabel == "you are here"){
				gameAttendanceData[maximumAttendanceIndex] = {label: maximumAttendanceIndex+1, y: maximumAttendance, indexLabel: "highest - you are here", markerColor: "red", markerType: "triangle"};
			}else{
				gameAttendanceData[maximumAttendanceIndex] = {label: maximumAttendanceIndex+1, y: maximumAttendance, indexLabel: "highest", markerColor: "red", markerType: "triangle"};
			}
			
			myChart = new CanvasJS.Chart("chartContainer", {
                animationEnabled: true,
                theme: "light5",
                title: {
                    text: "Average # of Spectators per Round - " + leagueString
                },
                axisY: {
                    includeZero: false
                },
                data: [{
                    type: "line",
					click: onClick,
                    dataPoints: gameAttendanceData
                }],
				backgroundColor: "rgba(255,255,255,0.6)"
				
            });
			
            myChart.render();
			
			
			
			
		}
        window.onload = function () {
			
			drawChart();
			

        }
			$(document).ready(function() {
				$( "#buttonRight" ).click(function() {
					//debugger;
				incrementSelectedGame(1);
				});
				$( "#buttonLeft" ).click(function() {
					//debugger;
					incrementSelectedGame(-1);
				});
				
				$('#selectLeague').on('change', function() {
					//debugger;
					if(this.value == "League 1-2017"){
						selectedLeague = ligueFrancais2017;
					}else if(this.value == "League 1-2016"){
						selectedLeague = ligueFrancais2016;
					}
					redrawScoreboardAndMap();
				});
				
			});
		
    </script> //chart code ends here
<script src="scriptTest.js"></script>

</html>